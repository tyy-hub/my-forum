(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68900a8b"],{"0cb2":function(t,e,n){var r=n("7b0b"),o=Math.floor,i="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,s,u,l){var p=n+t.length,d=s.length,f=c;return void 0!==u&&(u=r(u),f=a),i.call(l,f,(function(r,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(p);case"<":a=u[i.slice(1,-1)];break;default:var c=+i;if(0===c)return r;if(c>d){var l=o(c/10);return 0===l?r:l<=d?void 0===s[l-1]?i.charAt(1):s[l-1]+i.charAt(1):r}a=s[c-1]}return void 0===a?"":a}))}},"14c3":function(t,e,n){var r=n("c6b6"),o=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var i=n.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},1876:function(t,e,n){"use strict";n("3dd9")},"3dd9":function(t,e,n){},5319:function(t,e,n){"use strict";var r=n("d784"),o=n("825a"),i=n("50c4"),a=n("a691"),c=n("1d80"),s=n("8aa5"),u=n("0cb2"),l=n("14c3"),p=Math.max,d=Math.min,f=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,n,r){var h=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=r.REPLACE_KEEPS_$0,v=h?"$":"$0";return[function(n,r){var o=c(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,o,r):e.call(String(o),n,r)},function(t,r){if(!h&&g||"string"===typeof r&&-1===r.indexOf(v)){var c=n(e,t,this,r);if(c.done)return c.value}var m=o(t),x=String(this),b="function"===typeof r;b||(r=String(r));var y=m.global;if(y){var _=m.unicode;m.lastIndex=0}var I=[];while(1){var $=l(m,x);if(null===$)break;if(I.push($),!y)break;var E=String($[0]);""===E&&(m.lastIndex=s(x,i(m.lastIndex),_))}for(var k="",S=0,w=0;w<I.length;w++){$=I[w];for(var C=String($[0]),R=p(d(a($.index),x.length),0),L=[],O=1;O<$.length;O++)L.push(f($[O]));var P=$.groups;if(b){var A=[C].concat(L,R,x);void 0!==P&&A.push(P);var j=String(r.apply(void 0,A))}else j=u(C,x,R,L,P,r);R>=S&&(k+=x.slice(S,R)+j,S=R+C.length)}return k+x.slice(S)}]}))},"7db0":function(t,e,n){"use strict";var r=n("23e7"),o=n("b727").find,i=n("44d2"),a="find",c=!0;a in[]&&Array(1)[a]((function(){c=!1})),r({target:"Array",proto:!0,forced:c},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(a)},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"8dbb":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.topic?r("div",{staticClass:"inner"},[r("Panel",{scopedSlots:t._u([{key:"content",fn:function(){return[r("div",[r("h2",[t._v(" "+t._s(t.topic.title)+" "),t.isLogin?r("button",{on:{click:t.collect}},[t._v(" "+t._s(t.topic.is_collect?"取消收藏":"收藏")+" ")]):t._e()]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.userInfoLoginName===t.authorLoginname,expression:"userInfoLoginName === authorLoginname"}],staticClass:"edit"},[r("router-link",{attrs:{to:{name:"create",params:{paramsTopicId:t.paramsTopicId}}}},[r("el-button",{attrs:{type:"primary"}},[t._v("编辑")])],1)],1),r("div",{staticClass:"inner-content",domProps:{innerHTML:t._s(t.topic.content)}})])]},proxy:!0}],null,!1,3147004745)}),r("Panel",{scopedSlots:t._u([{key:"header",fn:function(){return[r("div",{staticClass:"nav"})]},proxy:!0},{key:"content",fn:function(){return t._l(t.topic.replies,(function(e,o){return r("div",{key:e.id,staticClass:"container"},[r("router-link",{attrs:{to:"/user/"+e.author.loginname}},[r("img",{attrs:{width:"30px",src:e.author.avatar_url,alt:""}})]),r("span",[t._v(t._s(e.author.loginname))]),r("span",{domProps:{innerHTML:t._s(e.content)}}),t.isLogin?r("div",{staticClass:"icon"},[r("button",{class:{"up-active":e.is_uped},on:{click:function(n){return t.upClick(e.id,o)}}},[r("img",{attrs:{src:n("b3b1"),alt:""}}),t._v(" 点赞 "+t._s(e.ups.length?e.ups.length:"")+" ")]),r("button",{on:{click:function(n){return t.otherSubmit(e)}}},[r("img",{attrs:{src:n("f331"),alt:""}}),t._v(" 回复 ")])]):t._e(),t.textId===e.id?r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"textarea",refInFor:!0,staticClass:"reply-text",attrs:{cols:"30",rows:"5"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}):t._e(),t.textId===e.id?r("el-button",{staticClass:"reply-btn",on:{click:function(n){return t.otherSubmitEvent(e)}}},[t._v("回复")]):t._e(),r("hr")],1)}))},proxy:!0}],null,!1,444974043)}),r("Panel",{scopedSlots:t._u([{key:"header",fn:function(){return[r("div",{staticClass:"nav"},[r("span",[t._v("添加回复")])])]},proxy:!0},{key:"content",fn:function(){return[r("div",{staticClass:"container"},[r("Editor",{attrs:{"model-event":"blur change keydown paste focus","api-key":"9mieih2cqsubf30b1omff3w107ojvjfvzhmb7haq4giiy754",init:{language:"zh_CN",forced_root_block:!1,elementpath:!1,branding:!1,height:300,menubar:!0,toolbar:"code undo redo restoredraft | cut copy paste pastetext | forecolor backcolor bold italic underline strikethrough link anchor | alignleft aligncenter alignright alignjustify outdent indent |         styleselect formatselect fontselect fontsizeselect | bullist numlist | blockquote subscript superscript removeformat |         table image media charmap emoticons hr pagebreak insertdatetime print preview | fullscreen | bdmap indent2em lineheight formatpainter axupimgs"}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),r("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("回复")])],1)]},proxy:!0}],null,!1,1301502807)})],1):t._e()},o=[],i=n("1da1"),a=(n("7db0"),n("a434"),n("c740"),n("ac1f"),n("5319"),n("96cf"),n("89d7")),c=n("ca72"),s={components:{Panel:a["a"],Editor:c["a"]},data:function(){return{topic:{},text:"",userInfoId:"",userInfoLoginName:"",avatar_url:"",textId:"",content:"",token:"",authorLoginname:"",paramsTopicId:""}},computed:{isLogin:function(){return this.$store.state.userInfo}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,o,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params.topicId,t.paramsTopicId=t.$route.params.topicId,r=localStorage.getItem("isLogin"),t.$store.commit("getUserInfo",JSON.parse(r)),o=localStorage.getItem("token"),t.token=JSON.parse(o),i=t.token?"/topic/".concat(n,"?accesstoken=this.token"):"/topic/".concat(n),e.next=9,t.$axios.get(i);case 9:a=e.sent,t.topic=a.data,console.log(t.topic),t.authorLoginname=t.topic.author.loginname,t.isLogin&&(t.userInfoId=t.$store.state.userInfo.id,t.userInfoLoginName=t.$store.state.userInfo.loginname,t.avatar_url=t.$store.state.userInfo.avatar_url);case 14:case"end":return e.stop()}}),e)})))()},methods:{upClick:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.topic.author.loginname===n.userInfoLoginName||n.topic.replies[e].author.loginname===n.userInfoLoginName){r.next=9;break}return r.next=3,n.$axios.post("/reply/".concat(t,"/ups"),{accesstoken:n.token});case 3:o=r.sent,i=n.topic.replies.find((function(e){return e.id===t})),i.is_uped="up"===o.action,"up"===o.action?i.ups.push(n.userInfoId):i.ups.splice(i.ups.findIndex((function(t){return t.id===n.userInfoId})),1),r.next=10;break;case 9:n.$message.error("不可以给自己点赞哦");case 10:case"end":return r.stop()}}),r)})))()},submit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isLogin){e.next=12;break}if(n=t.text,console.log(n),!n){e.next=10;break}return e.next=6,t.$axios.post("/topic/".concat(t.topic.id,"/replies"),{accesstoken:t.token,content:n});case 6:r=e.sent,o={id:r.reply_id,is_uped:!1,ups:[],content:"<p>".concat(n,"</p>"),author:{avatar_url:t.avatar_url,loginname:t.userInfoLoginName}},t.topic.replies.push(o),t.text="";case 10:e.next=13;break;case 12:t.$message.error("请先登录噢");case 13:case"end":return e.stop()}}),e)})))()},otherSubmit:function(t){var e=t.id,n=t.author;this.textId=e,this.content="@".concat(n.loginname," "),this.$nextTick((function(){this.$refs.textarea[0].focus()}))},otherSubmitEvent:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,o,i,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.id,o=e.content,i=t.author.loginname,console.log(i),!o){n.next=11;break}return n.next=7,e.$axios.post("/topic/".concat(e.topic.id,"/replies"),{accesstoken:e.token,content:o,reply_id:r});case 7:a=n.sent,c={id:a.reply_id,is_uped:!1,ups:[],content:"<p>".concat(o.replace(/@[\w-]+/,"<a href='/user/loginname'>@".concat(i,"</a>")),"</p>"),author:{avatar_url:e.avatar_url,loginname:e.userInfoLoginName}},e.topic.replies.push(c),e.content="";case 11:case"end":return n.stop()}}),n)})))()},collect:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.topic.is_collect){e.next=6;break}return e.next=3,t.$axios.post("/topic_collect/de_collect",{accesstoken:t.token,topic_id:t.topic.id});case 3:t.topic.is_collect=!1,e.next=9;break;case 6:return e.next=8,t.$axios.post("/topic_collect/collect",{accesstoken:t.token,topic_id:t.topic.id});case 8:t.topic.is_collect=!0;case 9:case"end":return e.stop()}}),e)})))()}}},u=s,l=(n("1876"),n("2877")),p=Object(l["a"])(u,r,o,!1,null,null,null);e["default"]=p.exports},9263:function(t,e,n){"use strict";var r=n("ad6d"),o=n("9f7f"),i=n("5692"),a=RegExp.prototype.exec,c=i("native-string-replace",String.prototype.replace),s=a,u=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=o.UNSUPPORTED_Y||o.BROKEN_CARET,p=void 0!==/()??/.exec("")[1],d=u||p||l;d&&(s=function(t){var e,n,o,i,s=this,d=l&&s.sticky,f=r.call(s),h=s.source,g=0,v=t;return d&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),v=String(t).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==t[s.lastIndex-1])&&(h="(?: "+h+")",v=" "+v,g++),n=new RegExp("^(?:"+h+")",f)),p&&(n=new RegExp("^"+h+"$(?!\\s)",f)),u&&(e=s.lastIndex),o=a.call(d?n:s,v),d?o?(o.input=o.input.slice(g),o[0]=o[0].slice(g),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:u&&o&&(s.lastIndex=s.global?o.index+o[0].length:e),p&&o&&o.length>1&&c.call(o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o}),t.exports=s},"9f7f":function(t,e,n){"use strict";var r=n("d039");function o(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a434:function(t,e,n){"use strict";var r=n("23e7"),o=n("23cb"),i=n("a691"),a=n("50c4"),c=n("7b0b"),s=n("65f0"),u=n("8418"),l=n("1dde"),p=l("splice"),d=Math.max,f=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var n,r,l,p,v,m,x=c(this),b=a(x.length),y=o(t,b),_=arguments.length;if(0===_?n=r=0:1===_?(n=0,r=b-y):(n=_-2,r=f(d(i(e),0),b-y)),b+n-r>h)throw TypeError(g);for(l=s(x,r),p=0;p<r;p++)v=y+p,v in x&&u(l,p,x[v]);if(l.length=r,n<r){for(p=y;p<b-r;p++)v=p+r,m=p+n,v in x?x[m]=x[v]:delete x[m];for(p=b;p>b-r+n;p--)delete x[p-1]}else if(n>r)for(p=b-r;p>y;p--)v=p+r-1,m=p+n-1,v in x?x[m]=x[v]:delete x[m];for(p=0;p<n;p++)x[p+y]=arguments[p+2];return x.length=b-r+n,l}})},ac1f:function(t,e,n){"use strict";var r=n("23e7"),o=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},ad6d:function(t,e,n){"use strict";var r=n("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b3b1:function(t,e,n){t.exports=n.p+"img/dianzan.e327d696.png"},c4a9:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var r=function(){return"undefined"!==typeof window?window:t},o=function(){var t=r();return t&&t.tinymce?t.tinymce:null}}).call(this,n("c8ba"))},c740:function(t,e,n){"use strict";var r=n("23e7"),o=n("b727").findIndex,i=n("44d2"),a="findIndex",c=!0;a in[]&&Array(1)[a]((function(){c=!1})),r({target:"Array",proto:!0,forced:c},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(a)},ca72:function(t,e,n){"use strict";var r=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],o=function(t){return-1!==r.map((function(t){return t.toLowerCase()})).indexOf(t.toLowerCase())},i=function(t,e,n){Object.keys(e).filter(o).forEach((function(r){var o=e[r];"function"===typeof o&&("onInit"===r?o(t,n):n.on(r.substring(2),(function(t){return o(t,n)})))}))},a=function(t,e){var n=t.$props.modelEvents?t.$props.modelEvents:null,r=Array.isArray(n)?n.join(" "):n;e.on(r||"change input undo redo",(function(){t.$emit("input",e.getContent({format:t.$props.outputFormat}))}))},c=function(t,e,n){var r=e.$props.value?e.$props.value:"",o=e.$props.initialValue?e.$props.initialValue:"";n.setContent(r||(e.initialized?e.cache:o)),e.$watch("value",(function(t,r){n&&"string"===typeof t&&t!==r&&t!==n.getContent({format:e.$props.outputFormat})&&n.setContent(t)})),e.$listeners.input&&a(e,n),i(t,e.$listeners,n),e.initialized=!0},s=0,u=function(t){var e=Date.now(),n=Math.floor(1e9*Math.random());return s++,t+"_"+n+s+String(e)},l=function(t){return null!==t&&"textarea"===t.tagName.toLowerCase()},p=function(t){return"undefined"===typeof t||""===t?[]:Array.isArray(t)?t:t.split(" ")},d=function(t,e){return p(t).concat(p(e))},f=function(t){return null===t||void 0===t},h=function(){return{listeners:[],scriptId:u("tiny-script"),scriptLoaded:!1}},g=function(){var t=h(),e=function(t,e,n,r){var o=e.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=t,o.src=n;var i=function(){o.removeEventListener("load",i),r()};o.addEventListener("load",i),e.head&&e.head.appendChild(o)},n=function(n,r,o){t.scriptLoaded?o():(t.listeners.push(o),n.getElementById(t.scriptId)||e(t.scriptId,n,r,(function(){t.listeners.forEach((function(t){return t()})),t.scriptLoaded=!0})))},r=function(){t=h()};return{load:n,reinitialize:r}},v=g(),m=n("c4a9"),x={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return"html"===t||"text"===t}}},b=function(){return b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},b.apply(this,arguments)},y=function(t,e,n){return t(n||"div",{attrs:{id:e}})},_=function(t,e){return t("textarea",{attrs:{id:e},style:{visibility:"hidden"}})},I=function(t){return function(){var e=b(b({},t.$props.init),{readonly:t.$props.disabled,selector:"#"+t.elementId,plugins:d(t.$props.init&&t.$props.init.plugins,t.$props.plugins),toolbar:t.$props.toolbar||t.$props.init&&t.$props.init.toolbar,inline:t.inlineEditor,setup:function(e){t.editor=e,e.on("init",(function(n){return c(n,t,e)})),t.$props.init&&"function"===typeof t.$props.init.setup&&t.$props.init.setup(e)}});l(t.element)&&(t.element.style.visibility="",t.element.style.display=""),Object(m["a"])().init(e)}},$={props:x,created:function(){this.elementId=this.$props.id||u("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline,this.initialized=!1},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==Object(m["a"])())I(this)();else if(this.element&&this.element.ownerDocument){var t=this.$props.cloudChannel?this.$props.cloudChannel:"5",e=this.$props.apiKey?this.$props.apiKey:"no-api-key",n=f(this.$props.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+e+"/tinymce/"+t+"/tinymce.min.js":this.$props.tinymceScriptSrc;v.load(this.element.ownerDocument,n,I(this))}},beforeDestroy:function(){null!==Object(m["a"])()&&Object(m["a"])().remove(this.editor)},deactivated:function(){var t;this.inlineEditor||(this.cache=this.editor.getContent(),null===(t=Object(m["a"])())||void 0===t||t.remove(this.editor))},activated:function(){!this.inlineEditor&&this.initialized&&I(this)()},render:function(t){return this.inlineEditor?y(t,this.elementId,this.$props.tagName):_(t,this.elementId)}};e["a"]=$},d784:function(t,e,n){"use strict";n("ac1f");var r=n("6eeb"),o=n("d039"),i=n("b622"),a=n("9112"),c=i("species"),s=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),l=i("replace"),p=function(){return!!/./[l]&&""===/./[l]("a","$0")}(),d=!o((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,l){var f=i(t),h=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),g=h&&!o((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return e=!0,null},n[f](""),!e}));if(!h||!g||"replace"===t&&(!s||!u||p)||"split"===t&&!d){var v=/./[f],m=n(f,""[t],(function(t,e,n,r,o){return e.exec===RegExp.prototype.exec?h&&!o?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),x=m[0],b=m[1];r(String.prototype,t,x),r(RegExp.prototype,f,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}l&&a(RegExp.prototype[f],"sham",!0)}},f331:function(t,e,n){t.exports=n.p+"img/huifu.f6cdad76.png"}}]);
//# sourceMappingURL=chunk-68900a8b.ec49fd32.js.map